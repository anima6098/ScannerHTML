<!DOCTYPE html>
<html>
<head>
  <title>Barcode Scanner</title>
  <script type="module">
    import { BrowserMultiFormatReader } from 'https://cdn.jsdelivr.net/npm/@zxing/browser@latest/+esm';

    const codeReader = new BrowserMultiFormatReader();
    const resultElement = document.getElementById('result');

    codeReader.decodeFromVideoDevice(null, 'video', (result, err) => {
      if (result) {
        const text = result.getText();
        resultElement.textContent = '‚úÖ Scanned: ' + text;
        navigator.clipboard.writeText(text).then(() => {
          console.log('Copied to clipboard:', text);
        });
      } else if (err && !(err instanceof ZXing.NotFoundException)) {
        console.error(err);
      }
    }).catch(err => {
      console.error('Camera access error:', err);
      resultElement.textContent = '‚ùå Could not access camera. Check browser permissions.';
    });
  </script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 40px; }
    video { border: 2px solid #000; width: 100%; max-width: 480px; }
    #result { font-size: 20px; margin-top: 20px; color: green; }
  </style>
</head>
<body>
  <h2>üì∑ Barcode Scanner (Real-time)</h2>
  <video id="video" autoplay muted playsinline></video>
  <p id="result">Waiting for scan...</p>
</body>
</html>
